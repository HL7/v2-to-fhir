HL7 v2,,,,,,Condition (IF True),,,HL7 FHIR,,,,,,,,,Comments
Sort Order,Identifier,Name,Data Type,Cardinality - Min,Cardinality - Max,Computable ANTLR,Computable FHIRPath,Narrative,FHIR Attribute/ Data Type,,Data Type,Cardinality - Min,Cardinality - Max,Data Type Mapping,"Vocabulary Mapping
(IS, ID, CE, CNE, CWE)",Assignment,,
0,,,,,,,,,,,,,,,,,,"When mapping a location in, e.g., PV1 to Encounter or PR1 to Procedure, one must reference the most granular Location availabile in PL, e.g., Bed, from the resource that references the Location resource, and then add additional Locations using Location.partOf to reference the next less granular Location.  For example, if PL.3 Bed is the most granular, the reference Encounter or Procedure to Location must reference the location for the Bed.

From most granular to least, the default sequence would be Bed to Room to Floor to Point of Core to Building to Facility.  If a particular location is not present in PL, the reference goes to the next higher level.  One may locally need to adjust the default sequencing based on local implementation.

For example, if PV1-3 of a message contains a room, bed, and point of care, then Encounter.location.location must reference the Location resource for PV1-3.3 (PL1.3) and that Location reference has a Location.partOf that reference the Location reference for PV1-3.2 (PL1.2) which then in turn references the Point of Care location using Location.partOf that references PV1-3.1 (PL.1).  Local variations on which PL component is more or less granular may vary.

While normally the meaning of [n] notation does not imply sequence when used within a map, in this map the first [n] notation in the column J cells is only to clarify the default granularity progression."
1,PL.1,Point of Care,HD,0,1,,,,[4].identifier[1],,Identifier,,,HD[Identifier],,,,
1,PL.1,Point of Care,HD,0,1,,,,[4].location(Location.mode),,code,0,1,,,"""instance""",,
1,PL.1,Point of Care,HD,0,1,,,,[4].location(Location.physicalType.coding.code),,code,0,1,,,/extension??-poc/,,
1,PL.1,Point of Care,HD,0,1,,,,[4].location(Location.physicalType.coding.system),,uri,0,1,,,"""http://terminology.hl7.org/CodeSystem/location-physical-type""",,
1,PL.1,Point of Care,HD,0,1,,,,[4].partOf.reference(Location[6]),,string,0,1,,,,,
2,PL.2,Room,HD,0,1,,,,[2].identifier[1],,Identifier,,,HD[Identifier],,,,
2,PL.2,Room,HD,0,1,,,,[2].mode,,code,0,1,,,"""instance""",,
2,PL.2,Room,HD,0,1,,,,[2].physicalType.coding.code,,code,0,1,,,"""ro""",,
2,PL.2,Room,HD,0,1,,,,[2].physicalType.coding.system,,uri,0,1,,,"""http://terminology.hl7.org/CodeSystem/location-physical-type""",,
2,PL.2,Room,HD,0,1,,,,[2].partOf.reference(Location[3]),,string,0,1,,,,,
3,PL.3,Bed,HD,0,1,,,,[1].identifier[1],,Identifier,,,HD[Identifier],,,,
3,PL.3,Bed,HD,0,1,,,,[1].mode,,code,0,1,,,"""instance""",,
3,PL.3,Bed,HD,0,1,,,,[1].physicalType.coding.code,,code,0,1,,,"""bd""",,
3,PL.3,Bed,HD,0,1,,,,[1].physicalType.coding.system,,uri,0,1,,,"""http://terminology.hl7.org/CodeSystem/location-physical-type""",,
3,PL.3,Bed,HD,0,1,,,,[1].partOf.reference(Location[2]),,string,0,1,,,,,
4,PL.4,Facility,HD,0,1,,,,[6].identifier[1],,Identifier,,,HD[Identifier],,,,
4,PL.4,Facility,HD,0,1,,,,[6].mode,,code,0,1,,,"""instance""",,
4,PL.4,Facility,HD,0,1,,,,[6].physicalType.coding.code,,code,0,1,,,"""si""",,
4,PL.4,Facility,HD,0,1,,,,[6].physicalType.coding.system,,uri,0,1,,,"""http://terminology.hl7.org/CodeSystem/location-physical-type""",,
5,PL.5,Location Status,IS,0,1,,,,,,,,,,,,,
6,PL.6,Person Location Type,IS,0,1,,,,,,,,,,,,,
7,PL.7,Building,HD,0,1,,,,[5].identifier[1],,Identifier,,,HD[Identifier],,,,
7,PL.7,Building,HD,0,1,,,,[5].mode,,code,0,1,,,"""instance""",,
7,PL.7,Building,HD,0,1,,,,[5].physicalType.coding.code,,code,0,1,,,"""bu""",,
7,PL.7,Building,HD,0,1,,,,[5].physicalType.coding.system,,uri,0,1,,,"""http://terminology.hl7.org/CodeSystem/location-physical-type""",,
7,PL.7,Building,HD,0,1,,,,[5].partOf.reference(Location[5]),,string,0,1,,,,,
8,PL.8,Floor,HD,0,1,,,,[3].identifier[1],,Identifier,,,HD[Identifier],,,,
8,PL.8,Floor,HD,0,1,,,,[3].mode,,code,0,1,,,"""instance""",,
8,PL.8,Floor,HD,0,1,,,,[3].physicalType.coding.code,,code,0,1,,,"""lvl""",,
8,PL.8,Floor,HD,0,1,,,,[3].physicalType.coding.system,,uri,0,1,,,"""http://terminology.hl7.org/CodeSystem/location-physical-type""",,
8,PL.8,Floor,HD,0,1,,,,[3].partOf.reference(Location[4]),,string,0,1,,,,,
9,PL.9,Location Description,ST,0,1,,,,[1].location(Location.description),,string,0,1,,,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.3 VALUED,,,[1].identifier[2],,Identifier,,,EI[Identifier-Organization],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.2 VALUED AND PL.3 NOT VALUED,,,[2].identifier[2],,Identifier,,,EI[Identifier-Organization],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.1 VALUE AND PL.2 NOT VALUED AND PL.3 NOT VALUED,,,[5].identifier[2],,Identifier,,,EI[Identifier-Organization],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.8 VALUED AND PL.1 NOT VALUED AND PL.2 NOT VALUED AND PL3.NOT VALUED,,,[3].identifier[2],,Identifier,,,EI[Identifier-Organization],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.7 VALUED AND PL.1 NOT VALUED AND PL.2 NOT VALUED AND PL.3 NOT VALUED AND PL.8 NOT VALUED,,,[4].identifier[2],,Identifier,,,EI[Identifier-Organization],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.4 VALUED AND PL.1 NOT VALUED AND PL.2 NOT VALUED AND PL.3 NOT VALUED AND PL.8 NOT VALUED AND PL.7 NOT VALUED,,,[6].identifier[2],,Identifier,,,EI[Identifier-Organization],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.11 VALUED AND IF PL.3 VALUED,,,[1].identifier[2],,Identifier,,,EI[Identifier-DefaultAssigner],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.11 VALUED AND IF PL.2 VALUED AND PL.3 NOT VALUED,,,[2].identifier[2],,Identifier,,,EI[Identifier-DefaultAssigner],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.11 VALUED AND IF PL.1 VALUED AND PL.2 NOT VALUED AND PL.3 NOT VALUED,,,[4].identifier[2],,Identifier,,,EI[Identifier-DefaultAssigner],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.11 VALUED AND IF PL.8 VALUED AND PL.1 NOT VALUED AND PL.2 NOT VALUED AND PL3.NOT VALUED,,,[3].identifier[2],,Identifier,,,EI[Identifier-DefaultAssigner],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.11 VALUED AND IF PL.7 VALUED AND PL.1 NOT VALUED AND PL.2 NOT VALUED AND PL.3 NOT VALUED AND PL.8 NOT VALUED,,,[5].identifier[2],,Identifier,,,EI[Identifier-DefaultAssigner],,,,
10,PL.10,Comprehensive Location Identifier,EI,0,1,IF PL.11 VALUED AND IF PL.4 VALUED AND PL.1 NOT VALUED AND PL.2 NOT VALUED AND PL.3 NOT VALUED AND PL.8 NOT VALUED AND PL.7 NOT VALUED,,,[6].identifier[2],,Identifier,,,EI[Identifier-DefaultAssigner],,,,
11,PL.11,Assigning Authority for Location,HD,0,1,,,,[1-6].identifier[1].assigner(Organization),,Reference,,,HD[Organization],,,,
11,PL.11,Assigning Authority for Location,HD,0,1,,,,[1-6].identifier[2].assigner(Organization),,Reference,,,HD[Organization],,,,